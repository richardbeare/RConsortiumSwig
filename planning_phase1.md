# Introduction

Planning document for refactoring the R module in SWIG - the
simplified wrapper interface generator. The purpose of this document,
which doubles as a report for phase 1 of the project, is to catalog
the inappropriate use of string comparisons in the R module. The
string comparisons are typically applied to variable and method names
of that are, in turn, derived from the code being interfaced to. This
leads to a loss of information about the methods/variables and many
problems. 

One example is the use of specific suffixes, that are likely to clash
with names in user code. For example, SWIG generates functions to
allow set/get access (aka _accessors_) to structure members, and these
functions have a specific naming scheme that parts of the R module
depend on. However this naming scheme - a _set_ suffix - frequently
clashes with names used in the code for which interfaces are being
generated, leading to a range of problems. The critical information
being lost in this case is the fact that a function was generated by
SWIG. The module should not depend on naming for this.

The next phase will replace these occurences with the
appropriate use of the swig parse tree.

# Background

SWIG generates C/C++ code and interpreter code to interface between an
interpreted language, such as R, and C/C++ code. Each target language
supported by SWIG has a swig C++ module providing the required
language specific functions. There is also an extensive set of typemap
configuration files that provide default behaviour that can be overridden
on a per-project basis. This project is refactoring the C++ module.

# Report structure

This report is a catalog of problem areas, which will be displayed as
hyperlinks into a github hosted SWIG repository. The C++ module file is I'll be examining is:

[swig/Source/Modules/r.cxx]({{ site.swigrepo }}/{{site.swigtag}}/Source/Modules/r.cxx)

# String comparisons

## String comparison functions

The R module uses _Strcmp_, _Strncmp_, _strcmp_ and _strncmp_ for comparing strings.

## Function catalog

I'll begin with a list of functions using comparisons, before going
into detail of whether the cases represent something that should be changed.

There are repeats, with different comparisons being used in the same function.

### _Strcmp_

1. [getRTypeName]({{site.swigrcxx}}#L30)
1. [getRClassNameCopyStruct]({{site.swigrcxx}}#L140)
1. [createFunctionPointerHandler]({{site.swigrcxx}}#L542)
1. [OutputArrayMethod]({{site.swigrcxx}}#L1166)
1. [enumDeclaration]({{site.swigrcxx}}#L1201)
1. [addAccessor]({{site.swigrcxx}}#L1311)
1. [Swig\_overload\_rank]({{site.swigrcxx}}#L1352)
1. [dispatchFunction]({{site.swigrcxx}}#L1596)
1. [functionWrapper]({{site.swigrcxx}}#L1723)
1. [registerClass]({{site.swigrcxx}}#L2342)
1. [classDeclaration]({{site.swigrcxx}}#L2401)
1. [generateCopyRoutines]({{site.swigrcxx}}#L2532)

### _Strncmp_

1. [replaceInitialDash]({{site.swigrcxx}}#L18)
1. [getRTypeName]({{site.swigrcxx}}#L30)
1. [getRClassNameCopyStruct]({{site.swigrcxx}}#L140)
1. [expandTypedef]({{site.swigrcxx}}#L233)
1. [addCopyParameter]({{site.swigrcxx}}#L246)
1. [functionWrapper]({{site.swigrcxx}}#L1723)
1. [typedefHandler]({{site.swigrcxx}}#L2828)

### _strcmp_

1. [OutputClassMemberTable]({{site.swigrcxx}}#L984)
1. [OutputMemberReferenceMethod]({{site.swigrcxx}}#L1034)
1. [main]({{site.swigrcxx}}#L2697)

### _strncmp_

1. [getRClassNameCopyStruct]({{site.swigrcxx}}#L140)
